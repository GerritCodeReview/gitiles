{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0ced2ab7_ff721e02",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 542,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2024-05-03T18:29:58Z",
      "side": 1,
      "message": "Can you add a test for this in `javatests/com/google/gitiles/PathServletTest.java`?",
      "range": {
        "startLine": 542,
        "startChar": 24,
        "endLine": 542,
        "endChar": 37
      },
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ebf2714_37ff7a0d",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 542,
      "author": {
        "id": 1132393
      },
      "writtenOn": "2024-05-14T13:01:47Z",
      "side": 1,
      "message": "After the changes to `java/com/google/gitiles/PathServlet.java`, servlet tests now fail with `NullPointerException`, pointing to line 557, `head.getLeaf().getName(),`. Any idea on how to take tests into account here?\n\nMy added test is also unfinished. I don\u0027t know how to get the name of the `repo` test repository object. I\u0027m not seeing anything suitable in https://archive.eclipse.org/jgit/site/5.1.2.201810061102-r/apidocs/org/eclipse/jgit/junit/TestRepository.html\n\nI hope it\u0027s otherwise going to a sensible direction.",
      "parentUuid": "0ced2ab7_ff721e02",
      "range": {
        "startLine": 542,
        "startChar": 24,
        "endLine": 542,
        "endChar": 37
      },
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2bb9390_47b7d389",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 542,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2024-05-14T13:16:09Z",
      "side": 1,
      "message": "AFAICT `head` and `head.getLeaf()` can still be null, so those null-checks are still necessary.\n\n```\n      RefDatabase refdb \u003d ServletUtils.getRepository(req).getRefDatabase();\n      Ref head \u003d refdb.exactRef(Constants.HEAD);\n      Ref headLeaf \u003d head !\u003d null? head.getLeaf() : null;\n      if (headLeaf \u003d\u003d null) {\n        return null;\n      }\n```",
      "parentUuid": "2ebf2714_37ff7a0d",
      "range": {
        "startLine": 542,
        "startChar": 24,
        "endLine": 542,
        "endChar": 37
      },
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd2a3b6f_63b2b647",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 547,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2024-05-03T18:29:58Z",
      "side": 1,
      "message": "`getLeaf()` handles checking `isSymbolic()` for you, so don\u0027t duplicate that.\n\nOnce you also apply the fix for my comment below, you\u0027ll have a specific non-null check for `head` after line 546 and then you can safely update line 557 with `head.getLeaf().getName()`.",
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc62afe9_81323cf5",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 547,
      "author": {
        "id": 1132393
      },
      "writtenOn": "2024-05-14T13:01:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cd2a3b6f_63b2b647",
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35eb8ca1_94e4caa3",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 549,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2024-05-03T18:29:58Z",
      "side": 1,
      "message": "You should probably do this check earlier (immediately after line 544) so that you can skip the ref lookup when you\u0027re going to return null anyway.",
      "range": {
        "startLine": 549,
        "startChar": 10,
        "endLine": 549,
        "endChar": 31
      },
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3cd09bd4_a0f247eb",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 549,
      "author": {
        "id": 1132393
      },
      "writtenOn": "2024-05-14T13:01:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "35eb8ca1_94e4caa3",
      "range": {
        "startLine": 549,
        "startChar": 10,
        "endLine": 549,
        "endChar": 31
      },
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "067d7193_7a78bd44",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 558,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2024-05-03T18:29:58Z",
      "side": 1,
      "message": "Does this get passed through `escapeName()` or is it escaped some other way?",
      "range": {
        "startLine": 554,
        "startChar": 0,
        "endLine": 558,
        "endChar": 32
      },
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "af1d2d53_aef1c230",
        "filename": "java/com/google/gitiles/PathServlet.java",
        "patchSetId": 6
      },
      "lineNbr": 558,
      "author": {
        "id": 1132393
      },
      "writtenOn": "2024-05-14T13:01:47Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "067d7193_7a78bd44",
      "range": {
        "startLine": 554,
        "startChar": 0,
        "endLine": 558,
        "endChar": 32
      },
      "revId": "5ebea6d9f5a8ab0665b1e45331036c00e1857d0e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}