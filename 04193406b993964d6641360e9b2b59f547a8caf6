{
  "comments": [
    {
      "key": {
        "uuid": "1850bf04_33be4a03",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2019-11-18T20:20:26Z",
      "side": 1,
      "message": "Do you include more context from the bug here? E.g. what is the symptom or error message without this change?\n\nIs there a way to cover this in tests so we don\u0027t regress?",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "eaebda87_1f6a0fdc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-11-19T18:30:28Z",
      "side": 1,
      "message": "I haven\u0027t looked yet at the test coverage for that, but yes, it should be possible.",
      "parentUuid": "1850bf04_33be4a03",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10a1bc15_0653b4be",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-11-19T18:57:13Z",
      "side": 1,
      "message": "@Jonathan I do not see any target for running tests in the Bazel BUILD: am I looking at the wrong place? Running tests from Eclipse, result in many failures: is that expected?",
      "parentUuid": "eaebda87_1f6a0fdc",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c069b6c0_af7cc27b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-11-19T20:26:09Z",
      "side": 1,
      "message": "The same as in gerrit:\n\n  $ cd gitiles\n  $ bazel test //javatests/...\n  Starting local Bazel server and connecting to it...\n  [...]\n    bazel-bin/javatests/com/google/gitiles/servlet_tests.jar\n    bazel-bin/javatests/com/google/gitiles/servlet_tests\n  INFO: Elapsed time: 52.762s, Critical Path: 30.63s\n  INFO: 35 processes: 17 remote cache hit, 18 local.\n  INFO: Build completed successfully, 39 total actions\n  //javatests/com/google/gitiles:servlet_tests                             PASSED in 11.6s",
      "parentUuid": "10a1bc15_0653b4be",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4142908e_02172ca3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-11-19T20:28:14Z",
      "side": 1,
      "message": "Idea for a test case would be:\n\n* 1. generate on the fly XML file with size \u003e 10MB\n* 2. Add this file to a commit\n* 3. Retrieve the file from gitiles\n* 4. Verify that it is not prettified",
      "parentUuid": "c069b6c0_af7cc27b",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3ab99823_9458bd8d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-11-19T20:57:53Z",
      "side": 1,
      "message": "thanks, will do that tonight",
      "parentUuid": "4142908e_02172ca3",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e97df72e_c079ecc7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-11-18T20:33:15Z",
      "side": 1,
      "message": "The problem here is the definitive loop in the prettify regex, that cannot handle huge files, like 300 MB generated xml files. Could you clarify?",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 10,
        "endChar": 55
      },
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "30d0b893_5a2887b6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 10,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-11-19T18:30:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e97df72e_c079ecc7",
      "range": {
        "startLine": 10,
        "startChar": 0,
        "endLine": 10,
        "endChar": 55
      },
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d45c853b_cce45c92",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2019-11-18T20:20:26Z",
      "side": 1,
      "message": "Can put this as an actual footer:\n\n Bug: https://github.com/google/gitiles/issues/192",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "353c702b_bab32466",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 12,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-11-19T18:30:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d45c853b_cce45c92",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b12a5d5b_0ebd3975",
        "filename": "java/com/google/gitiles/BlobSoyData.java",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 1011842
      },
      "writtenOn": "2019-11-18T20:20:26Z",
      "side": 1,
      "message": "long line\n\nInteresting! I would expect isLarge (hence LargeObjectException) to kick in for huge files. Sounds like the motivating case is somewhere in the middle.",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1af52530_41f3995e",
        "filename": "java/com/google/gitiles/BlobSoyData.java",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2019-11-18T20:33:15Z",
      "side": 1,
      "message": "Yes, it is unexpected, that isLarge() in JGit doesn\u0027t throw LargeObjectException and this method:\n\n  loader.getCachedBytes(MAX_FILE_SIZE);\n\nreturns the content even if MAX_FILE_SIZE \u003d 10 MB, but the content is 300 MB. The code path in isLarge() is just asking if it fit in memory, and if it does, then the parameter MAX_FILE_SIZE is actually omitted.",
      "parentUuid": "b12a5d5b_0ebd3975",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "daaf4585_15c551c7",
        "filename": "java/com/google/gitiles/BlobSoyData.java",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-11-19T18:35:13Z",
      "side": 1,
      "message": "According to the JavaDoc of loader.getCachedBytes(), it is the expected behaviour: if the object is not considered large (e.g. fits in streamFileThreshold window cache) then the MAX_FILE_SIZE parameter is just ignored.",
      "parentUuid": "1af52530_41f3995e",
      "revId": "04193406b993964d6641360e9b2b59f547a8caf6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}