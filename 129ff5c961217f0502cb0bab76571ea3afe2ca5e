{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "843f95e8_7dd0d45b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2025-10-08T00:17:16Z",
      "side": 1,
      "message": "Can you explain more what exactly this is fixing? Is there a bug report you can link to?",
      "revId": "129ff5c961217f0502cb0bab76571ea3afe2ca5e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "251ef084_4a876c9e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 4398326
      },
      "writtenOn": "2025-10-09T01:59:06Z",
      "side": 1,
      "message": "I don\u0027t have a permission issue a bug in bug tracker. \n\n\nwhen use  `bazelisk build //:gitiles` build a war package and deploy with apache-tomcat 9 . \nIt will throw a exception \n```\njava.lang.NoClassDefFoundError: com/google/common/util/concurrent/internal/InternalFutureFailureAccess\n\tjava.base/java.lang.ClassLoader.defineClass1(Native Method)\n\tjava.base/java.lang.ClassLoader.defineClass(ClassLoader.java:962)\n\tjava.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:144)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2342)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2212)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:821)\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1312)\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1160)\n\tjava.base/java.lang.ClassLoader.defineClass1(Native Method)\n\tjava.base/java.lang.ClassLoader.defineClass(ClassLoader.java:962)\n\tjava.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:144)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2342)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2212)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:821)\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1312)\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1160)\n\tjava.base/java.lang.ClassLoader.defineClass1(Native Method)\n\tjava.base/java.lang.ClassLoader.defineClass(ClassLoader.java:962)\n\tjava.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:144)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2342)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2212)\n\torg.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:821)\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1312)\n\torg.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1160)\n\tcom.google.common.cache.LocalCache$LoadingValueReference.\u003cinit\u003e(LocalCache.java:3512)\n\tcom.google.common.cache.LocalCache$LoadingValueReference.\u003cinit\u003e(LocalCache.java:3516)\n\tcom.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2169)\n\tcom.google.common.cache.LocalCache$Segment.get(LocalCache.java:2080)\n\tcom.google.common.cache.LocalCache.get(LocalCache.java:4012)\n\tcom.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4035)\n\tcom.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5013)\n\tcom.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5020)\n\tcom.google.template.soy.passes.ResolveExpressionTypesPass$FieldRegistry.findField(ResolveExpressionTypesPass.java:3231)\n...\n\tcom.google.gitiles.DefaultRenderer.\u003cinit\u003e(DefaultRenderer.java:52)\n\tcom.google.gitiles.DefaultRenderer.\u003cinit\u003e(DefaultRenderer.java:34)\n\tcom.google.gitiles.GitilesFilter.setDefaultRenderer(GitilesFilter.java:337)\n\tcom.google.gitiles.GitilesFilter.setDefaultFields(GitilesFilter.java:309)\n\tcom.google.gitiles.GitilesFilter.init(GitilesFilter.java:214)\n\tcom.google.gitiles.GitilesServlet.init(GitilesServlet.java:109)\n...\n```\nand use unzip lack of jar guava-failure\n```\nunzip -l webapps/gitiles-orig.war \nArchive:  webapps/gitiles-orig.war\n  Length      Date    Time    Name\n---------  ---------- -----   ----\n      303  01-01-1980 00:00   mime-types.properties\n        0  01-01-1980 00:00   WEB-INF/\n        0  01-01-1980 00:00   WEB-INF/lib/\n    17963  01-01-1980 00:00   WEB-INF/lib/flogger-system-backend-0.7.4.jar\n  3176009  01-01-1980 00:00   WEB-INF/lib/jgit.jar\n   170750  01-01-1980 00:00   WEB-INF/lib/commonmark-0.21.0.jar\n    19896  01-01-1980 00:00   WEB-INF/lib/autolink-0.10.0.jar\n  4658667  01-01-1980 00:00   WEB-INF/lib/soy-2024-01-30.jar\n    41125  01-01-1980 00:00   WEB-INF/lib/slf4j-api-1.7.36.jar\n   170567  01-01-1980 00:00   WEB-INF/lib/javaewah-1.2.3.jar\n 14311564  01-01-1980 00:00   WEB-INF/lib/icu4j-74.2.jar\n    15333  01-01-1980 00:00   WEB-INF/lib/slf4j-simple-1.7.36.jar\n     9065  01-01-1980 00:00   WEB-INF/lib/libcache.jar\n   333325  01-01-1980 00:00   WEB-INF/lib/reload4j-1.2.25.jar\n    25375  01-01-1980 00:00   WEB-INF/lib/jetty-continuation-9.4.53.v20231009.jar\n    34257  01-01-1980 00:00   WEB-INF/lib/asm-analysis-9.2.jar\n   283367  01-01-1980 00:00   WEB-INF/lib/gson-2.10.1.jar\n    95806  01-01-1980 00:00   WEB-INF/lib/javax.servlet-api-3.1.0.jar\n   736758  01-01-1980 00:00   WEB-INF/lib/jetty-server-9.4.53.v20231009.jar\n     6289  01-01-1980 00:00   WEB-INF/lib/flogger-log4j-backend-0.7.4.jar\n   588870  01-01-1980 00:00   WEB-INF/lib/jetty-util-9.4.53.v20231009.jar\n    11351  01-01-1980 00:00   WEB-INF/lib/commonmark-ext-gfm-strikethrough-0.21.0.jar\n    52660  01-01-1980 00:00   WEB-INF/lib/asm-tree-9.2.jar\n  1080823  01-01-1980 00:00   WEB-INF/lib/commons-compress-1.25.0.jar\n   183014  01-01-1980 00:00   WEB-INF/lib/jetty-io-9.4.53.v20231009.jar\n   122004  01-01-1980 00:00   WEB-INF/lib/asm-9.2.jar\n    72642  01-01-1980 00:00   WEB-INF/lib/asm-commons-9.2.jar\n  3041591  01-01-1980 00:00   WEB-INF/lib/guava-32.1.2-jre.jar\n    19604  01-01-1980 00:00   WEB-INF/lib/commonmark-ext-gfm-tables-0.21.0.jar\n   346784  01-01-1980 00:00   WEB-INF/lib/libservlet.jar\n    85897  01-01-1980 00:00   WEB-INF/lib/libjgit-servlet.jar\n   146065  01-01-1980 00:00   WEB-INF/lib/jetty-servlet-9.4.53.v20231009.jar\n    84854  01-01-1980 00:00   WEB-INF/lib/asm-util-9.2.jar\n     6088  01-01-1980 00:00   WEB-INF/lib/google-extensions-0.7.4.jar\n   106873  01-01-1980 00:00   WEB-INF/lib/types-1.0.8.jar\n   118497  01-01-1980 00:00   WEB-INF/lib/jetty-security-9.4.53.v20231009.jar\n    16827  01-01-1980 00:00   WEB-INF/lib/error_prone_annotations-2.22.0.jar\n     7484  01-01-1980 00:00   WEB-INF/lib/commonmark-ext-autolink-0.21.0.jar\n   249062  01-01-1980 00:00   WEB-INF/lib/jetty-http-9.4.53.v20231009.jar\n   136544  01-01-1980 00:00   WEB-INF/lib/commons-text-1.2.jar\n    15605  01-01-1980 00:00   WEB-INF/lib/libjgit-archive.jar\n  1681869  01-01-1980 00:00   WEB-INF/lib/protobuf-java-3.19.4.jar\n   501879  01-01-1980 00:00   WEB-INF/lib/commons-lang3-3.8.1.jar\n   179172  01-01-1980 00:00   WEB-INF/lib/flogger-0.7.4.jar\n    19943  01-01-1980 00:00   WEB-INF/lib/jsr305-3.0.1.jar\n   126817  01-01-1980 00:00   WEB-INF/lib/libjava-prettify.jar\n     1293  10-07-2025 10:26   WEB-INF/web.xml\n        0  01-01-1980 00:00   templates/\n     4250  01-01-1980 00:00   templates/Doc.soy\n     3479  01-01-1980 00:00   templates/PathDetail.soy\n    13630  01-01-1980 00:00   templates/ObjectDetail.soy\n    14743  01-01-1980 00:00   templates/LogDetail.soy\n     2238  01-01-1980 00:00   templates/DiffDetail.soy\n     2605  01-01-1980 00:00   templates/RevisionDetail.soy\n     2348  01-01-1980 00:00   templates/RefList.soy\n     1330  01-01-1980 00:00   templates/Error.soy\n     5491  01-01-1980 00:00   templates/Common.soy\n     3542  01-01-1980 00:00   templates/BlameDetail.soy\n     2389  01-01-1980 00:00   templates/HostIndex.soy\n     4978  01-01-1980 00:00   templates/RepositoryIndex.soy\n        0  01-01-1980 00:00   +static/\n     5161  01-01-1980 00:00   +static/doc.css\n        0  01-01-1980 00:00   +static/prettify/\n      675  01-01-1980 00:00   +static/prettify/prettify.css\n    12272  01-01-1980 00:00   +static/base.css\n---------                     -------\n 33189662                     65 files\n```\n\ncopy jar can fix it or just bundle into war when build.\n\nnext is what file structure expected \n```\nArchive:  bazel-bin/gitiles.war\n  Length      Date    Time    Name\n---------  ---------- -----   ----\n      303  01-01-1980 00:00   mime-types.properties\n        0  01-01-1980 00:00   WEB-INF/\n        0  01-01-1980 00:00   WEB-INF/lib/\n    17963  01-01-1980 00:00   WEB-INF/lib/flogger-system-backend-0.7.4.jar\n  3176009  01-01-1980 00:00   WEB-INF/lib/jgit.jar\n   170750  01-01-1980 00:00   WEB-INF/lib/commonmark-0.21.0.jar\n    19896  01-01-1980 00:00   WEB-INF/lib/autolink-0.10.0.jar\n  4658667  01-01-1980 00:00   WEB-INF/lib/soy-2024-01-30.jar\n    41125  01-01-1980 00:00   WEB-INF/lib/slf4j-api-1.7.36.jar\n   170567  01-01-1980 00:00   WEB-INF/lib/javaewah-1.2.3.jar\n 14311564  01-01-1980 00:00   WEB-INF/lib/icu4j-74.2.jar\n    15333  01-01-1980 00:00   WEB-INF/lib/slf4j-simple-1.7.36.jar\n     9065  01-01-1980 00:00   WEB-INF/lib/libcache.jar\n   333325  01-01-1980 00:00   WEB-INF/lib/reload4j-1.2.25.jar\n    25375  01-01-1980 00:00   WEB-INF/lib/jetty-continuation-9.4.53.v20231009.jar\n    34257  01-01-1980 00:00   WEB-INF/lib/asm-analysis-9.2.jar\n   283367  01-01-1980 00:00   WEB-INF/lib/gson-2.10.1.jar\n    95806  01-01-1980 00:00   WEB-INF/lib/javax.servlet-api-3.1.0.jar\n   736758  01-01-1980 00:00   WEB-INF/lib/jetty-server-9.4.53.v20231009.jar\n     6289  01-01-1980 00:00   WEB-INF/lib/flogger-log4j-backend-0.7.4.jar\n   588870  01-01-1980 00:00   WEB-INF/lib/jetty-util-9.4.53.v20231009.jar\n    11351  01-01-1980 00:00   WEB-INF/lib/commonmark-ext-gfm-strikethrough-0.21.0.jar\n    52660  01-01-1980 00:00   WEB-INF/lib/asm-tree-9.2.jar\n  1080823  01-01-1980 00:00   WEB-INF/lib/commons-compress-1.25.0.jar\n     4617  01-01-1980 00:00   WEB-INF/lib/failureaccess-1.0.1.jar\n   183014  01-01-1980 00:00   WEB-INF/lib/jetty-io-9.4.53.v20231009.jar\n   122004  01-01-1980 00:00   WEB-INF/lib/asm-9.2.jar\n    72642  01-01-1980 00:00   WEB-INF/lib/asm-commons-9.2.jar\n  3041591  01-01-1980 00:00   WEB-INF/lib/guava-32.1.2-jre.jar\n    19604  01-01-1980 00:00   WEB-INF/lib/commonmark-ext-gfm-tables-0.21.0.jar\n   346784  01-01-1980 00:00   WEB-INF/lib/libservlet.jar\n    85897  01-01-1980 00:00   WEB-INF/lib/libjgit-servlet.jar\n   146065  01-01-1980 00:00   WEB-INF/lib/jetty-servlet-9.4.53.v20231009.jar\n    84854  01-01-1980 00:00   WEB-INF/lib/asm-util-9.2.jar\n     6088  01-01-1980 00:00   WEB-INF/lib/google-extensions-0.7.4.jar\n   106873  01-01-1980 00:00   WEB-INF/lib/types-1.0.8.jar\n   118497  01-01-1980 00:00   WEB-INF/lib/jetty-security-9.4.53.v20231009.jar\n    16827  01-01-1980 00:00   WEB-INF/lib/error_prone_annotations-2.22.0.jar\n     7484  01-01-1980 00:00   WEB-INF/lib/commonmark-ext-autolink-0.21.0.jar\n   249062  01-01-1980 00:00   WEB-INF/lib/jetty-http-9.4.53.v20231009.jar\n   136544  01-01-1980 00:00   WEB-INF/lib/commons-text-1.2.jar\n    15605  01-01-1980 00:00   WEB-INF/lib/libjgit-archive.jar\n  1681869  01-01-1980 00:00   WEB-INF/lib/protobuf-java-3.19.4.jar\n   501879  01-01-1980 00:00   WEB-INF/lib/commons-lang3-3.8.1.jar\n   179172  01-01-1980 00:00   WEB-INF/lib/flogger-0.7.4.jar\n    19943  01-01-1980 00:00   WEB-INF/lib/jsr305-3.0.1.jar\n   126817  01-01-1980 00:00   WEB-INF/lib/libjava-prettify.jar\n     1293  10-07-2025 10:26   WEB-INF/web.xml\n        0  01-01-1980 00:00   templates/\n     4250  01-01-1980 00:00   templates/Doc.soy\n     3479  01-01-1980 00:00   templates/PathDetail.soy\n    13630  01-01-1980 00:00   templates/ObjectDetail.soy\n    14743  01-01-1980 00:00   templates/LogDetail.soy\n     2238  01-01-1980 00:00   templates/DiffDetail.soy\n     2605  01-01-1980 00:00   templates/RevisionDetail.soy\n     2348  01-01-1980 00:00   templates/RefList.soy\n     1330  01-01-1980 00:00   templates/Error.soy\n     5491  01-01-1980 00:00   templates/Common.soy\n     3542  01-01-1980 00:00   templates/BlameDetail.soy\n     2389  01-01-1980 00:00   templates/HostIndex.soy\n     4978  01-01-1980 00:00   templates/RepositoryIndex.soy\n        0  01-01-1980 00:00   +static/\n     5161  01-01-1980 00:00   +static/doc.css\n        0  01-01-1980 00:00   +static/prettify/\n      675  01-01-1980 00:00   +static/prettify/prettify.css\n    12272  01-01-1980 00:00   +static/base.css\n---------                     -------\n 33194279                     66 files\n```\n\nattention about  file `4617  01-01-1980 00:00   WEB-INF/lib/failureaccess-1.0.1.jar`",
      "parentUuid": "843f95e8_7dd0d45b",
      "revId": "129ff5c961217f0502cb0bab76571ea3afe2ca5e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ba03a1e_0581c94b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 1029953
      },
      "writtenOn": "2025-10-09T08:23:06Z",
      "side": 1,
      "message": "If you join https://groups.google.com/g/repo-discuss you\u0027ll be able to file bugs on the issue tracker.\n\nIt\u0027s an anti spam measure as we were being hit by spammers.",
      "parentUuid": "251ef084_4a876c9e",
      "revId": "129ff5c961217f0502cb0bab76571ea3afe2ca5e",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}