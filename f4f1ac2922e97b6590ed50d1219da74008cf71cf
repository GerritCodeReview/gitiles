{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a2ce88f1_88ccee80",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 3431258
      },
      "writtenOn": "2024-05-19T14:58:08Z",
      "side": 1,
      "message": "Thanks for your text team .",
      "revId": "f4f1ac2922e97b6590ed50d1219da74008cf71cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0cfe5d48_70cd00cd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 3867110
      },
      "writtenOn": "2025-04-02T05:54:05Z",
      "side": 1,
      "message": "\u003e Thanks for your text team .",
      "parentUuid": "a2ce88f1_88ccee80",
      "revId": "f4f1ac2922e97b6590ed50d1219da74008cf71cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d328f24_7e41f50f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 4464833
      },
      "writtenOn": "2025-11-08T02:05:01Z",
      "side": 1,
      "message": "You are a highly experienced code reviewer specializing in Git patches. Your\ntask is to analyze the provided Git patch (`patch`) and provide comprehensive\nfeedback.  Focus on identifying potential bugs, inconsistencies, security\nvulnerabilities, and areas for improvement in code style and readability.\nYour response should be detailed and constructive, offering specific suggestions\nfor remediation where applicable. Prioritize clarity and conciseness in your\nfeedback.\n\n# Step by Step Instructions\n\n1.  Read the provided `patch` carefully.  Understand the changes it introduces to the codebase.\n\n2.  Analyze the `patch` for potential issues:\n    * **Functionality:** Does the code work as intended? Are there any bugs or unexpected behavior?\n    * **Security:** Are there any security vulnerabilities introduced by the patch?\n    * **Style:** Does the code adhere to the project\u0027s coding style guidelines? Is it readable and maintainable?\n    * **Consistency:** Are there any inconsistencies with existing code or design patterns?\n    * **Testing:** Does the patch include sufficient tests to cover the changes?\n\n3.  Formulate concise and constructive feedback for each identified issue.  Provide specific suggestions for remediation where possible.\n\n4.  Summarize your findings in a clear and organized manner.  Prioritize critical issues over minor ones.\n\n5.  Review the feedback written so far. Is the feedback comprehensive and sufficiently detailed?\nIf not, go back to step 2, focusing on any areas that require further analysis or clarification.\n If yes, proceed to step 6.\n\n6.  Output the complete review.\n\n\nPatch: \n\"\"\"\nFrom f4f1ac2922e97b6590ed50d1219da74008cf71cf Mon Sep 17 00:00:00 2001\nFrom: David Ostrovsky \u003cdavid@ostrovsky.org\u003e\nDate: Mon, 21 Nov 2016 01:18:56 +0100\nSubject: [PATCH] Bazel: Publish to local Maven repository and Google storage bucket\n\nTEST PLAN:\n\n  $ VERBOSE\u003d1 tools/maven/mvn.sh install\n  $ VERBOSE\u003d1 tools/maven/mvn.sh deploy\n\nChange-Id: I0b60f9e2137d8755f6e4ca32ff35ec5a5364f4a6\n---\n\ndiff --git a/BUILD b/BUILD\nnew file mode 100644\nindex 0000000..d2e59f3\n--- /dev/null\n+++ b/BUILD\n@@ -0,0 +1 @@\n+# This file is intended to be empty\ndiff --git a/VERSION b/VERSION\nindex f4510ea..61d6a75 100644\n--- a/VERSION\n+++ b/VERSION\n@@ -1,7 +1 @@\n-# Maven style API version (e.g. \u00272.x-SNAPSHOT\u0027).\n-#\n-# Used by :install and :deploy when talking to the destination repository. As\n-# we currently have no stable releases, we use the \"build number\" scheme\n-# described at:\n-# http://mojo.codehaus.org/versions-maven-plugin/version-rules.html\n-GITILES_VERSION \u003d \u00270.1-11\u0027\n+include_defs(\u0027//version.bzl\u0027)\ndiff --git a/WORKSPACE b/WORKSPACE\nindex 24eb0f0..d0b2b5a 100644\n--- a/WORKSPACE\n+++ b/WORKSPACE\n@@ -1,7 +1,7 @@\n workspace(name \u003d \"gitiles\")\n load(\"//tools:bazlets.bzl\", \"load_bazlets\")\n load_bazlets(\n-    commit \u003d \"e10ae3f85781aa15054be802b2a9f9465b1bf1e0\",\n+    commit \u003d \"0f87babe07a555425d829c6e7951e296e9e24579\",\n #    local_path \u003d \"/home/\u003cuser\u003e/projects/bazlets\"\n )\n load(\"@com_googlesource_gerrit_bazlets//tools:maven_jar.bzl\",\ndiff --git a/gitiles-servlet/BUILD b/gitiles-servlet/BUILD\nindex d3a7ff3..6b9fdef 100644\n--- a/gitiles-servlet/BUILD\n+++ b/gitiles-servlet/BUILD\n@@ -84,4 +84,5 @@\n     ],\n     pkgs \u003d [\"com.google.gitiles\"],\n     title \u003d \"Gitiles API Documentation\",\n+    visibility \u003d [\"//visibility:public\"],\n )\ndiff --git a/tools/maven/BUILD b/tools/maven/BUILD\nnew file mode 100644\nindex 0000000..07ae8b0\n--- /dev/null\n+++ b/tools/maven/BUILD\n@@ -0,0 +1,21 @@\n+load(\"//:version.bzl\", \"GITILES_VERSION\")\n+load(\"@com_googlesource_gerrit_bazlets//tools/maven:package.bzl\", \"maven_package\")\n+\n+maven_package(\n+    version \u003d GITILES_VERSION,\n+    group \u003d \"com.google.gitiles\",\n+    repository \u003d \"gerrit-maven-repository\",\n+    url \u003d \"gs://gerrit-maven\",\n+    jar \u003d {\n+        \"blame-cache\": \"//blame-cache:lib\",\n+        \"gitiles-servlet\": \"//gitiles-servlet:servlet\",\n+    },\n+    src \u003d {\n+        \"blame-cache\": \"//blame-cache:liblib-src.jar\",\n+        \"gitiles-servlet\": \"//gitiles-servlet:libservlet-src.jar\",\n+    },\n+    doc \u003d {\n+        \"blame-cache\": \"//blame-cache:javadoc\",\n+        \"gitiles-servlet\": \"//gitiles-servlet:javadoc\",\n+    },\n+)\ndiff --git a/tools/maven/mvn.sh b/tools/maven/mvn.sh\nnew file mode 100755\nindex 0000000..93bef01\n--- /dev/null\n+++ b/tools/maven/mvn.sh\n@@ -0,0 +1,56 @@\n+#!/bin/bash -e\n+\n+# Copyright (C) 2016 The Android Open Source Project\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+# http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+if [[ \"$#\" !\u003d \"1\" ]] ; then\n+  cat \u003c\u003cEOF\n+Usage: run \"$0 COMMAND\" from the top of your workspace,\n+where COMMAND is one of\n+\n+  install\n+  deploy\n+\n+Set VERBOSE in the environment to get more information.\n+\n+EOF\n+\n+  exit 1\n+fi\n+\n+set -o errexit\n+set -o nounset\n+\n+case \"$1\" in\n+install)\n+    command\u003d\"api_install\"\n+    ;;\n+deploy)\n+    command\u003d\"api_deploy\"\n+    ;;\n+*)\n+    echo \"unknown command $1\"\n+    exit 1\n+    ;;\n+esac\n+\n+if [[ \"${VERBOSE:-x}\" !\u003d \"x\" ]]; then\n+  set -o xtrace\n+fi\n+\n+bazel build //tools/maven:gen_${command} || \\\n+  { echo \"bazel failed to build gen_${command}. Use VERBOSE\u003d1 for more info\" ; exit 1 ; }\n+\n+export OUTPUT_BASE\u003d`bazel info output_base`\n+./bazel-genfiles/tools/maven/${command}.sh\ndiff --git a/version.bzl b/version.bzl\nnew file mode 100644\nindex 0000000..f4510ea\n--- /dev/null\n+++ b/version.bzl\n@@ -0,0 +1,7 @@\n+# Maven style API version (e.g. \u00272.x-SNAPSHOT\u0027).\n+#\n+# Used by :install and :deploy when talking to the destination repository. As\n+# we currently have no stable releases, we use the \"build number\" scheme\n+# described at:\n+# http://mojo.codehaus.org/versions-maven-plugin/version-rules.html\n+GITILES_VERSION \u003d \u00270.1-11\u0027\n\n\"\"\"\nIMPORTANT NOTE: Start directly with the output, do not output any delimiters.\nTake a Deep Breath, read the instructions again, read the inputs again. Each instruction is crucial and must be executed with utmost care and attention to detail.\n\nReview:",
      "revId": "f4f1ac2922e97b6590ed50d1219da74008cf71cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8da24305_1f6a7122",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 4464833
      },
      "writtenOn": "2025-11-08T02:14:43Z",
      "side": 1,
      "message": "You are a Git commit message expert, tasked with improving the quality and clarity of commit messages.\nYour goal is to generate a well-structured and informative commit message based on a provided Git patch. \nThe commit message must adhere to a specific style guide, focusing on conciseness, clarity, and a professional tone.\nYou will use the patch\u0027s diff to understand the changes, summarizing complex diffs and focusing on the intent and impact of the changes.\nYou should paraphrase any provided bug summaries to explain the problem that was fixed.\nYour output must be a single Markdown code block containing only the complete commit message (title and body), \nformatted according to the provided specifications.\n\n# Step by Step Instructions\n\n1. **Analyze the Patch:** Carefully examine the provided `patch` to understand the changes made to the codebase. \nIdentify the key modifications, focusing on their intent and impact. Summarize complex changes concisely.\n\n2. **Review Existing Commit Message:** Read the commit message included in the `patch`. Note its strengths and weaknesses.  \nIdentify areas for improvement in clarity, conciseness, and adherence to the style guide.\n\n3. **Refine the Title:** Craft a concise and informative commit title (under 60 characters) using sentence case and the imperative mood. \nThe title should accurately reflect the primary change implemented in the patch.\n\n4. **Develop the Body:** Write a detailed body for the commit message, explaining the \"what\" and \"why\" of the changes.\n Use the information gathered in Step 1 to describe the intent and impact of the modifications.  \n Structure the body using paragraphs, blank lines, and bullet points as needed for clarity. Wrap lines to approximately 72 characters.\n\n5. **Ensure Style Compliance:** Verify that the commit message (title and body) adheres to all requirements outlined in the provided\n\"Commit Message Requirements\" section.  This includes checking for sentence case, imperative mood, line wrapping, and the exclusion of testing information.\n\n6. **Format the Output:**  Enclose the complete commit message (title and body) within a single Markdown code block.\n Ensure there is one blank line separating the title and the body.\n\n7. **Review and Iterate (Loop Instruction):** Review the complete commit message. Is it clear, concise, and informative? \nDoes it accurately reflect the changes made in the patch and adhere to the style guide? If not, return to Step 3 or Step 4 to make improvements.  If satisfied, proceed to Step 8.\n\n8. **Output the Commit Message:** Output the final, formatted commit message as a single Markdown code block.\n\n\nPatch: \n\"\"\"\nFrom f4f1ac2922e97b6590ed50d1219da74008cf71cf Mon Sep 17 00:00:00 2001\nFrom: David Ostrovsky \u003cdavid@ostrovsky.org\u003e\nDate: Mon, 21 Nov 2016 01:18:56 +0100\nSubject: [PATCH] Bazel: Publish to local Maven repository and Google storage bucket\n\nTEST PLAN:\n\n  $ VERBOSE\u003d1 tools/maven/mvn.sh install\n  $ VERBOSE\u003d1 tools/maven/mvn.sh deploy\n\nChange-Id: I0b60f9e2137d8755f6e4ca32ff35ec5a5364f4a6\n---\n\ndiff --git a/BUILD b/BUILD\nnew file mode 100644\nindex 0000000..d2e59f3\n--- /dev/null\n+++ b/BUILD\n@@ -0,0 +1 @@\n+# This file is intended to be empty\ndiff --git a/VERSION b/VERSION\nindex f4510ea..61d6a75 100644\n--- a/VERSION\n+++ b/VERSION\n@@ -1,7 +1 @@\n-# Maven style API version (e.g. \u00272.x-SNAPSHOT\u0027).\n-#\n-# Used by :install and :deploy when talking to the destination repository. As\n-# we currently have no stable releases, we use the \"build number\" scheme\n-# described at:\n-# http://mojo.codehaus.org/versions-maven-plugin/version-rules.html\n-GITILES_VERSION \u003d \u00270.1-11\u0027\n+include_defs(\u0027//version.bzl\u0027)\ndiff --git a/WORKSPACE b/WORKSPACE\nindex 24eb0f0..d0b2b5a 100644\n--- a/WORKSPACE\n+++ b/WORKSPACE\n@@ -1,7 +1,7 @@\n workspace(name \u003d \"gitiles\")\n load(\"//tools:bazlets.bzl\", \"load_bazlets\")\n load_bazlets(\n-    commit \u003d \"e10ae3f85781aa15054be802b2a9f9465b1bf1e0\",\n+    commit \u003d \"0f87babe07a555425d829c6e7951e296e9e24579\",\n #    local_path \u003d \"/home/\u003cuser\u003e/projects/bazlets\"\n )\n load(\"@com_googlesource_gerrit_bazlets//tools:maven_jar.bzl\",\ndiff --git a/gitiles-servlet/BUILD b/gitiles-servlet/BUILD\nindex d3a7ff3..6b9fdef 100644\n--- a/gitiles-servlet/BUILD\n+++ b/gitiles-servlet/BUILD\n@@ -84,4 +84,5 @@\n     ],\n     pkgs \u003d [\"com.google.gitiles\"],\n     title \u003d \"Gitiles API Documentation\",\n+    visibility \u003d [\"//visibility:public\"],\n )\ndiff --git a/tools/maven/BUILD b/tools/maven/BUILD\nnew file mode 100644\nindex 0000000..07ae8b0\n--- /dev/null\n+++ b/tools/maven/BUILD\n@@ -0,0 +1,21 @@\n+load(\"//:version.bzl\", \"GITILES_VERSION\")\n+load(\"@com_googlesource_gerrit_bazlets//tools/maven:package.bzl\", \"maven_package\")\n+\n+maven_package(\n+    version \u003d GITILES_VERSION,\n+    group \u003d \"com.google.gitiles\",\n+    repository \u003d \"gerrit-maven-repository\",\n+    url \u003d \"gs://gerrit-maven\",\n+    jar \u003d {\n+        \"blame-cache\": \"//blame-cache:lib\",\n+        \"gitiles-servlet\": \"//gitiles-servlet:servlet\",\n+    },\n+    src \u003d {\n+        \"blame-cache\": \"//blame-cache:liblib-src.jar\",\n+        \"gitiles-servlet\": \"//gitiles-servlet:libservlet-src.jar\",\n+    },\n+    doc \u003d {\n+        \"blame-cache\": \"//blame-cache:javadoc\",\n+        \"gitiles-servlet\": \"//gitiles-servlet:javadoc\",\n+    },\n+)\ndiff --git a/tools/maven/mvn.sh b/tools/maven/mvn.sh\nnew file mode 100755\nindex 0000000..93bef01\n--- /dev/null\n+++ b/tools/maven/mvn.sh\n@@ -0,0 +1,56 @@\n+#!/bin/bash -e\n+\n+# Copyright (C) 2016 The Android Open Source Project\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+# http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+if [[ \"$#\" !\u003d \"1\" ]] ; then\n+  cat \u003c\u003cEOF\n+Usage: run \"$0 COMMAND\" from the top of your workspace,\n+where COMMAND is one of\n+\n+  install\n+  deploy\n+\n+Set VERBOSE in the environment to get more information.\n+\n+EOF\n+\n+  exit 1\n+fi\n+\n+set -o errexit\n+set -o nounset\n+\n+case \"$1\" in\n+install)\n+    command\u003d\"api_install\"\n+    ;;\n+deploy)\n+    command\u003d\"api_deploy\"\n+    ;;\n+*)\n+    echo \"unknown command $1\"\n+    exit 1\n+    ;;\n+esac\n+\n+if [[ \"${VERBOSE:-x}\" !\u003d \"x\" ]]; then\n+  set -o xtrace\n+fi\n+\n+bazel build //tools/maven:gen_${command} || \\\n+  { echo \"bazel failed to build gen_${command}. Use VERBOSE\u003d1 for more info\" ; exit 1 ; }\n+\n+export OUTPUT_BASE\u003d`bazel info output_base`\n+./bazel-genfiles/tools/maven/${command}.sh\ndiff --git a/version.bzl b/version.bzl\nnew file mode 100644\nindex 0000000..f4510ea\n--- /dev/null\n+++ b/version.bzl\n@@ -0,0 +1,7 @@\n+# Maven style API version (e.g. \u00272.x-SNAPSHOT\u0027).\n+#\n+# Used by :install and :deploy when talking to the destination repository. As\n+# we currently have no stable releases, we use the \"build number\" scheme\n+# described at:\n+# http://mojo.codehaus.org/versions-maven-plugin/version-rules.html\n+GITILES_VERSION \u003d \u00270.1-11\u0027\n\n\"\"\"\nIMPORTANT NOTE: Start directly with the output, do not output any delimiters.\nTake a Deep Breath, read the instructions again, read the inputs again. Each instruction is crucial and must be executed with utmost care and attention to detail.\n\nCommit Message:",
      "revId": "f4f1ac2922e97b6590ed50d1219da74008cf71cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3abe98d1_5f98b6cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 15
      },
      "lineNbr": 0,
      "author": {
        "id": 3951317
      },
      "writtenOn": "2025-11-13T23:13:54Z",
      "side": 1,
      "message": "91839: Bazel: Publish to local Maven repository and Google storage bucket | https://gerrit-review.googlesource.com/c/gitiles/+/91839",
      "revId": "f4f1ac2922e97b6590ed50d1219da74008cf71cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "79684dcc_db57228a",
        "filename": "tools/maven/mvn.sh",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-04-07T11:15:43Z",
      "side": 1,
      "message": "Why do we need this api_ prefix?",
      "range": {
        "startLine": 37,
        "startChar": 13,
        "endLine": 37,
        "endChar": 17
      },
      "revId": "f4f1ac2922e97b6590ed50d1219da74008cf71cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "93abe9ab_d471df1e",
        "filename": "tools/maven/mvn.sh",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2017-04-07T11:39:25Z",
      "side": 1,
      "message": "Strictly speaking, we don\u0027t. The reason we do it that way, is because I extracted the maven package bazlet from the gerrit code, and in gerrit we do have the \"api_\" prefix. So i just let it in place: [1].\n\n* [1] https://gerrit.googlesource.com/bazlets/+/master/tools/maven/package.bzl#50",
      "parentUuid": "79684dcc_db57228a",
      "range": {
        "startLine": 37,
        "startChar": 13,
        "endLine": 37,
        "endChar": 17
      },
      "revId": "f4f1ac2922e97b6590ed50d1219da74008cf71cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}