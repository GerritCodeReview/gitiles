{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "eaa0fb43_77e40906",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-11-08T11:20:17Z",
      "side": 1,
      "message": "What about:\n\n    Trying to view a hidden project shouldn\u0027t result in ISE",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 48
      },
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c486d26_14fb1123",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-08T18:32:45Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "eaa0fb43_77e40906",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 48
      },
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8add411c_cd13529d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 7,
      "author": {
        "id": 1142356
      },
      "writtenOn": "2021-11-09T07:35:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4c486d26_14fb1123",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 7,
        "endChar": 48
      },
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80397429_2d35fd74",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-05T05:05:46Z",
      "side": 1,
      "message": "Can a user cause this exception? If yes, how?",
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a2c85ca7_77198b3b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1142356
      },
      "writtenOn": "2021-11-05T07:02:44Z",
      "side": 1,
      "message": "Yes the exception occurs when a user is trying to view a hidden project which results in a 500 ISE. The following error message is then shown: \n\njava.lang.StringIndexOutOfBoundsException: String index out of range: -1\n        at java.base/java.lang.String.substring(String.java:1841)\n        at com.google.gitiles.HostIndexServlet.stripPrefix(HostIndexServlet.java:189)\n        at com.google.gitiles.HostIndexServlet.toMapData(HostIndexServlet.java:71)\n        \n\nThis made me think that the reason for the error is that the prefix and the name are equal in the stripPrefix-method. When this is the case the user should be notified before it crashes.",
      "parentUuid": "80397429_2d35fd74",
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3aca6ecf_e532122a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-11-09T14:21:17Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a2c85ca7_77198b3b",
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a123d835_7c3e6313",
        "filename": "java/com/google/gitiles/HostIndexServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-11-08T11:20:17Z",
      "side": 1,
      "message": "The point was to handle the situation when a hidden project is requested more \"nicely\" than an ISE. Won\u0027t the IllegalArgumentException also cause an ISE?",
      "range": {
        "startLine": 183,
        "startChar": 10,
        "endLine": 183,
        "endChar": 90
      },
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8586065d_88fbfa40",
        "filename": "java/com/google/gitiles/HostIndexServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-08T18:32:45Z",
      "side": 1,
      "message": "We also need to handle it the same as if a project that does not exist is handled.",
      "parentUuid": "a123d835_7c3e6313",
      "range": {
        "startLine": 183,
        "startChar": 10,
        "endLine": 183,
        "endChar": 90
      },
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "828802f4_22966648",
        "filename": "java/com/google/gitiles/HostIndexServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1142356
      },
      "writtenOn": "2021-11-09T07:35:29Z",
      "side": 1,
      "message": "\u003e We also need to handle it the same as if a project that does not exist is handled.\n\nI have removed the IllegalArgumentException and done as Sven suggested and swaped to if-statements. I think this will solve the problem.",
      "parentUuid": "8586065d_88fbfa40",
      "range": {
        "startLine": 183,
        "startChar": 10,
        "endLine": 183,
        "endChar": 90
      },
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49b9eb7e_d2426b7a",
        "filename": "java/com/google/gitiles/HostIndexServlet.java",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2021-11-09T14:21:17Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "828802f4_22966648",
      "range": {
        "startLine": 183,
        "startChar": 10,
        "endLine": 183,
        "endChar": 90
      },
      "revId": "363d94c1c603a62ff99671218d6874cfcd1e50cf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}